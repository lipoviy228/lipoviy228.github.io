<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å | –ú–∞—Å—Ç–µ—Ä–∞ –Ω–∞ –¥–æ–º</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üëë</text></svg>">
</head>
<body>
    <div class="container">
        <div class="github-header">
            <a href="https://github.com/yourusername/telegram-admin-panel" target="_blank">
                <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub">
                –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
            </a>
        </div>
        
        <header>
            <h1>üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Telegram –±–æ—Ç–∞</h1>
            <p class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ –∏ –º–∞—Å—Ç–µ—Ä–∞–º–∏ | GitHub Pages</p>
        </header>

        <div class="alert info">
            <p>‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –±–æ—Ç —Å HTTP API</p>
            <p>–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: <code id="api-url">http://localhost:8000</code></p>
            <button class="btn-small" onclick="changeApiUrl()">–ò–∑–º–µ–Ω–∏—Ç—å URL API</button>
        </div>

        <div class="user-info" id="user-info">
            <div class="user-avatar" id="user-avatar">TG</div>
            <div class="user-details">
                <h3 id="user-name">–û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram...</h3>
                <p id="user-role">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞</p>
                <div class="connection-status">
                    <span class="status-dot" id="connection-status"></span>
                    <span id="connection-text">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...</span>
                </div>
            </div>
        </div>

        <!-- –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ, –Ω–æ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –Ω–∏–∂–µ -->
        
        <div class="api-config">
            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</h3>
            <div class="form-group">
                <label for="api-endpoint">URL API –≤–∞—à–µ–≥–æ –±–æ—Ç–∞:</label>
                <div class="input-group">
                    <input type="text" id="api-endpoint" 
                           placeholder="http://localhost:8000" 
                           value="http://localhost:8000">
                    <button class="btn-small" onclick="testConnection()">–¢–µ—Å—Ç</button>
                </div>
                <p class="help-text">
                    –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ —Å HTTP —Å–µ—Ä–≤–µ—Ä–æ–º (–ø–æ—Ä—Ç 8000)<br>
                    –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ <strong>ngrok</strong> –∏–ª–∏ —Ö–æ—Å—Ç–∏–Ω–≥
                </p>
            </div>
        </div>

        <!-- –î–∞—à–±–æ—Ä–¥, –º–µ–Ω—é –∏ —Ç.–¥. (–∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ) -->

        <footer>
            <div class="footer-info">
                <p>üì° <strong>–°—Ç–∞—Ç—É—Å API:</strong> <span id="api-status">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω</span></p>
                <p>üîÑ <strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> <span id="last-update">--:--:--</span></p>
                <p>‚ö° <strong>–í–µ—Ä—Å–∏—è:</strong> 1.0.0 | GitHub Pages</p>
            </div>
            <div class="footer-actions">
                <button class="btn-secondary" onclick="refreshData()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                <button class="btn-secondary" onclick="showDebugInfo()">üêõ –û—Ç–ª–∞–¥–∫–∞</button>
                <button class="btn-secondary" onclick="resetSettings()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>
        </footer>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="debug-modal">
        <div class="modal-content">
            <h3>üêõ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏</h3>
            <pre id="debug-info"></pre>
            <div class="modal-actions">
                <button class="btn" onclick="copyDebugInfo()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn-secondary" onclick="closeModal('debug-modal')">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ -->

    <script src="app.js"></script>
    <script src="api.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –≤ Telegram
            if (window.Telegram && window.Telegram.WebApp) {
                initApp();
            } else {
                // –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
                document.getElementById('user-name').textContent = '–†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ (–±—Ä–∞—É–∑–µ—Ä)';
                document.getElementById('user-role').textContent = 'üë®‚Äçüíª –¢–µ—Å—Ç–æ–≤—ã–π –¥–æ—Å—Ç—É–ø';
                document.getElementById('user-role').style.color = '#2196f3';
                
                // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                enableTestMode();
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            loadSettings();
        });
        
        function enableTestMode() {
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
            window.currentUser = {
                id: 123456789,
                first_name: '–¢–µ—Å—Ç–æ–≤—ã–π',
                last_name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä'
            };
            window.isAdmin = true;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            refreshData();
        }
        
        function loadSettings() {
            const savedUrl = localStorage.getItem('telegram_admin_api_url');
            if (savedUrl) {
                document.getElementById('api-endpoint').value = savedUrl;
                document.getElementById('api-url').textContent = savedUrl;
            }
        }
        
        function saveSettings() {
            const url = document.getElementById('api-endpoint').value;
            localStorage.setItem('telegram_admin_api_url', url);
            document.getElementById('api-url').textContent = url;
        }
    </script>
</body>
</html>